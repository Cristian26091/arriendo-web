
<body>
    
    <div class="container mt-5">
        <h1 class="text-center">Registro de habitación</h1>
        
        <div class="form-section">
            <h2>Información del Modelo</h2>
            <hr>
            <div class="row mb-3">
                <div class="col md-6">
                    <!-- Modelo 3D: Zona de arrastre (Drop Zone) -->
                    <div id="dropZone" class="drop-zone" *ngIf="!isUploadModel" (drop)="onDrop($event)" (dragover)="onDragOver($event)">
                        <!-- Icono de carga centrado arriba del texto -->
                        <div class="d-flex flex-column align-items-center" style="position: relative; height: 50%;">
                            <i class="bi bi-upload h1 mb-3"></i>
                            <p class="mb-0">Arrastra y suelta archivos aquí</p>
                        </div>
                        <input type="file" id="fileInput" accept=".fbx, .obj, .dae, .blend, .stl, .zip, .rar" (change)="onFileSelected($event)" style="display:none">
                    </div>

                    <!-- Barra de carga -->
                    <div class="progress" *ngIf="isUploadModel">
                        <div class="progress-bar progress-bar-striped progress-bar-animated" 
                        role="progressbar" aria-label="Animated striped example" aria-valuenow="75" 
                        aria-valuemin="0" aria-valuemax="100" style="width: 75%"></div>
                    </div>
                </div>
            </div>
        </div>
        
        <form>
            <h2>Información de Ubicación</h2>
            <hr>

            <div class="form-section">
                <div class="row mb-3">
                    <!-- seleccionar region -->
                    <div class="col-md-6">
                        <label for="region" class="form-label">Seleccione una región</label>
                        <select class="form-select" [(ngModel)]="selectedRegion" (change)="onRegionSelect($event)" name="region">
                            <option disabled value="">Selecciona una region</option>
                            <option *ngFor="let region of regionService.regions" [value]="region.nombre_region">{{ region.nombre_region }}</option>

                        </select>
                    </div>
                    <!-- seleccionar comuna -->
                    <div class="col-md-6">
                        <label for="comuna" class="form-label">Seleccione una comuna</label>
                        <select class="form-select" [(ngModel)]="selectedComuna" (change)="onComunaSelect($event)" name="comuna">
                            <option disabled selected>Seleccione una comuna</option>
                            <option *ngFor="let comuna of regionService.selectedRegion.comunas" [value]="comuna.nombre_comuna">{{comuna.nombre_comuna}}</option>
                        </select>
                    </div>
                </div>
                <!-- <div class="row mb-3"> 
                    <div class="col-md-6">
                        <label for="ciudad" class="form-label">Ingrese una ciudad</label>
                        <select class="form-select" id="ciudad" name="ciudad">
                        </select>
                    </div>
                    <div class="col-md-6">
                        <label for="provincia" class="form-label">Seleccione una provincia</label>
                        <select class="form-select" id="provincia" name="provincia">

                        </select>
                    </div>
                </div> -->
            </div>

            <h2>Información de la habitación</h2>
            <hr>

            <div class="form-section">
                <div class="row mb-3">
                    <!-- tipo de casa -->
                    <div class="col-md-6">
                        <label for="tipo-casa" class="form-label"> Seleccione un tipo de Casa</label>
                        <select class="form-select" name="tipo-casa" [(ngModel)]="selectedHome" (change)="onSelectHome($event)">
                            <option disabled value="">Seleccione un tipo de casa</option>
                            <option *ngFor="let tipo of homeTypes" [value]="tipo">{{tipo}}</option>
                        </select>
                    </div>
                    <!-- numero de habitacion -->
                    <div class="col-md-6">
                        <label for="num-habitacion" class="form-label">Ingrese el número de Habitación</label>
                        <input type="text" class="form-control" name="num-habitacion" [(ngModel)]="roomNumber">
                    </div>
                </div>
                <div class="row mb-3">
                    <!-- tipo de baño -->
                    <div class="col-md-6">
                        <label for="num-bano" class="form-label">Seleccione el tipo de Baño</label>
                        <select class="form-select" name="num-bano"  (change)="onBathroomTypeSelect($event)">
                            <option disabled value="">Selecciona un tipo de baño</option>
                            <option *ngFor="let type of bathRoomTypes" [value]="type">{{ type }}</option>
                        </select>
                    </div>
                    <!-- precio mensual -->
                    <div class="col-md-6">
                        <label for="precio" class="form-label">Ingrese el precio mensual de la habitación (en CLP)</label>
                        <input type="text" class="form-control" name="precio" [(ngModel)]="roomPrice">
                    </div>
                </div>
                <div class="mb-3">
                    <label for="calle" class="form-label">Ingrese la calle</label>
                    <input type="text" class="form-control" name="calle" [(ngModel)]="roomStreet">
                </div>
                <div class="mb-3">
                    <label for="descripcion" class="form-label">Ingrese una descripción</label>
                    <textarea class="form-control" name="descripcion" [(ngModel)]="roomDescription" rows="4"></textarea>
                </div>
            </div>
            
            <div class="row mb-3">
                <div class="col-md-">
                    <label for="descripcion" class="form-label">Ingresa la imagen del cover</label>
                    <div class="drop-zone" id="dropArea">
                        <i class="bi bi-card-image h1"></i>
                        <p class="fs-5">Arrastra y suelta el cover aquí</p>
                    </div>
                    
                </div>
            </div>

            <div class="text-center">
                <button type="submit" class="btn btn-primary" (click)="onSubmit()">Cargar habitación</button>
            </div>
        </form>
    </div>

</body>
